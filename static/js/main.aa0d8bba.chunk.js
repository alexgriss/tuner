(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},29:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(2),r=n.n(a),c=n(7),l=n(1),s=n(13);function u(){var e=Object(c.a)(["\n  ","\n\n  html,\n  body {\n    width: 100%;\n  }\n\n  body {\n    background-color: #303030;\n    font-family: Arial, Helvetica, sans-serif\n  }\n"]);return u=function(){return e},e}var d=Object(l.a)(u(),Object(s.a)()),p=n(10),m=n(11),f=n(14),g=n(12),h=n(15),v=n(17),b=l.b.div.withConfig({displayName:"Wrapper",componentId:"ql59oq-0"})(["margin-top:50px;position:relative;display:flex;width:500px;height:250px;"]),w=l.b.div.withConfig({displayName:"Point",componentId:"sc-5dbmqu-0"})(["position:absolute;height:100%;transform-origin:bottom;width:2px;right:calc(50% - 1px);border-top:","px solid ",";transform:rotate(","deg);"],function(e){return e.isStrong?20:10},function(e){return e.isGreen?"#a9c519":"#b2b2b2"},function(e){return e.angle}),x=l.b.div.withConfig({displayName:"PointValue",componentId:"sc-1qyb3cx-0"})(["position:absolute;top:","px;left:50%;transform:translateX(-50%);color:",";"],function(e){return e.isSmallTopMargin?-35:-45},function(e){return e.isGreen?"#a9c519":"#b2b2b2"}),y=l.b.div.withConfig({displayName:"Pointer",componentId:"rqr7cz-0"})(["position:absolute;height:100%;transform-origin:bottom;width:2px;height:calc(100% - 30px);background-color:#266980;bottom:0;left:50%;transform:translateX(-50%) rotate(","deg);z-index:10;transition:all 0.5s;"],function(e){return e.angle}),S=l.b.div.withConfig({displayName:"Dot",componentId:"sc-1b4zj67-0"})(["position:absolute;width:6px;height:6px;border-radius:50%;background-color:#266980;bottom:-3px;left:50%;transform:translateX(-50%);"]),C=[{angle:-45,value:-50},{angle:-36},{angle:-27,value:-30},{angle:-18},{angle:-9},{angle:0,value:0},{angle:9},{angle:18},{angle:27,value:30},{angle:36},{angle:45,value:50}],A=function(e){var t=e.cents,n=Object(v.a)(e,["cents"]);return o.a.createElement(b,n,o.a.createElement(S,null),o.a.createElement(y,{angle:isNaN(t)?0:.9*t}),C.map(function(e,t){return o.a.createElement(w,{key:e.angle,angle:e.angle,isStrong:[0,Math.ceil((C.length-1)/2),C.length-1].some(function(e){return e===t}),isGreen:9===Math.abs(e.angle)||0===e.angle},o.a.createElement(x,{isSmallTopMargin:30===Math.abs(e.value),isGreen:0===e.value},e.value))}))},E=l.b.div.withConfig({displayName:"AppWrapper",componentId:"j984ft-0"})(["width:100vw;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),M=l.b.div.withConfig({displayName:"Frequency",componentId:"sc-1xr7oq4-0"})(["margin-top:15px;color:#fff;font-size:22px;& > span{color:#93ccbf;}"]),k=l.b.div.withConfig({displayName:"NoteWrapper",componentId:"sc-1vld1pt-0"})(["margin-top:50px;display:flex;justify-content:center;align-items:baseline;color:#fff;"]),N=l.b.div.withConfig({displayName:"Note",componentId:"sc-1v21j89-0"})(["font-size:96px;line-height:74px;"]),P=l.b.div.withConfig({displayName:"Octave",componentId:"sc-4mzm90-0"})(["font-size:46px;line-height:40px;"]),j=l.b.button.withConfig({displayName:"Button__ButtonWrapper",componentId:"grv8ac-0"})(["display:flex;justify-content:",";align-items:center;width:100px;height:50px;margin-top:40px;border:0;outline:none;background-color:",";padding:5px;cursor:pointer;border-radius:4px;"],function(e){return e.isActive?"flex-end":"flex-start"},function(e){return e.isActive?"#93ccbf":"#fff"}),I=l.b.div.withConfig({displayName:"Button__ButtonContent",componentId:"grv8ac-1"})(["position:relative;width:40px;height:38px;background:",";border-radius:4px;"],function(e){return e.isActive?"#fff":"#93ccbf"}),D=function(e){var t=e.isActive,n=e.onClick;return o.a.createElement(j,{isActive:t,onClick:n},o.a.createElement(I,{isActive:t}))},T=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],q=function(e){var t=Math.log(e/440)/Math.log(2)*12;return Math.round(t)+69},z=function(e){return T[e%12]},G=function(e){return parseInt(e/12)-1},O=function(e,t){return Math.floor(1200*Math.log(e/function(e){return 440*Math.pow(2,(e-69)/12)}(t))/Math.log(2))},U=window.Aubio,B={note:"A",octave:4,cents:0,frequency:440,isTunerActive:!1},W=function(e){function t(){var e,n;Object(p.a)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state=B,n.pitchDetector=null,n.mediaStreamSource=null,n.scriptProcessor=null,n.getAudioContext=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)throw new Error("Web Audio API is not supported in this browser");return new window.AudioContext},n.initGetUserMedia=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;if(!t)throw new Error("getUserMedia is not implemented in this browser");return new Promise(function(n,i){t.call(navigator,e,n,i)})})},n.startTuner=function(){try{var e=n.getAudioContext();U().then(function(t){n.pitchDetector=new t.Pitch("default",2048,1,e.sampleRate),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){n.scriptProcessor=e.createScriptProcessor(2048,1,1),n.mediaStreamSource=e.createMediaStreamSource(t);var i=e.createAnalyser();i.fftSize=2048,n.mediaStreamSource.connect(i),i.connect(n.scriptProcessor),n.scriptProcessor.connect(e.destination),n.scriptProcessor.addEventListener("audioprocess",n.audioProcessCallback)})})}catch(t){alert("Error: "+t.message)}},n.audioProcessCallback=function(e){var t=n.pitchDetector.do(e.inputBuffer.getChannelData(0));if(t){var i=q(t),o=O(t,i);n.setState({note:z(i),octave:G(i),frequency:t.toFixed(1),cents:o})}},n.handleStartTuner=function(){n.setState({isTunerActive:!0},function(){n.startTuner()})},n.handleStopTuner=function(){n.setState(B,function(){n.mediaStreamSource&&n.mediaStreamSource.mediaStream&&n.mediaStreamSource.mediaStream.stop&&n.mediaStreamSource.mediaStream.stop(),n.scriptProcessor.removeEventListener("audioprocess",n.audioProcessCallback),n.mediaStreamSource=null})},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.initGetUserMedia()}},{key:"componentWillUnmount",value:function(){this.handleStopTuner()}},{key:"render",value:function(){var e=this.state,t=e.note,n=e.octave,i=e.cents,a=e.frequency,r=e.isTunerActive;return o.a.createElement(E,null,o.a.createElement(A,{cents:i}),o.a.createElement(k,null,o.a.createElement(N,null,t),o.a.createElement(P,null,n)),o.a.createElement(M,null,o.a.createElement("span",null,a)," Hz"),o.a.createElement(D,{isActive:r,onClick:r?this.handleStopTuner:this.handleStartTuner}))}}]),t}(i.Component);r.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement(d,null),o.a.createElement(W,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.aa0d8bba.chunk.js.map